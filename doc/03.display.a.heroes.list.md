# Display a Heroes List
Display a list of heroes.

### :zap: mock data: mock-heroes.ts
```typescript
import { Hero } from './hero';

export const HEROES: Hero[] = [
  { id: 11, name: 'Dr Nice' },
  { id: 12, name: 'Narco' },
  { id: 13, name: 'Bombasto' },
  { id: 14, name: 'Celeritas' },
  { id: 15, name: 'Magneta' },
  { id: 16, name: 'RubberMan' },
  { id: 17, name: 'Dynama' },
  { id: 18, name: 'Dr IQ' },
  { id: 19, name: 'Magma' },
  { id: 20, name: 'Tornado' }
];
```

### :cow: component: heroes.component.ts
```diff
import { Component, OnInit } from '@angular/core';

import { Hero } from '../hero';
+ import { HEROES } from '../mock-heroes';

@Component({
  selector: 'app-heroes',
  templateUrl: './heroes.component.html',
  styleUrls: ['./heroes.component.css']
})
export class HeroesComponent implements OnInit {
   hero: Hero = {
     id: 1,
     name: 'Windstorm'
   };

+  heroes: Hero[] = HEROES;

  constructor() { }

  ngOnInit() {
  }
}
```

### :pig: heroes.component.html
```diff
+ <h2>My Heroes</h2>
+ <ul class="heroes">
+  <li *ngFor="let hero of heroes">
+    <span class="badge">{{hero.id}}</span> {{hero.name}}
+  </li>
+ </ul>

<h2>{{hero.name | uppercase}} Details</h2>
<div><span>id: </span>{{hero.id}}</div>
<div>
  <label>name:
    <input [(ngModel)]="hero.name" placeholder="name"/>
  </label>
</div>
``` 

:negative_squared_cross_mark: unit test: 8 specs, 2 failures

:negative_squared_cross_mark: e2e test: Executed 4 of 4 specs (2 FAILED)

The unit test error happens because of element locator collusion, having two `h2` tags. Let us fix that. 

### :cat: unit test: heroes.component.spec.ts
```diff
import { async, ComponentFixture, TestBed } from '@angular/core/testing';
import { By } from '@angular/platform-browser';
import { FormsModule } from '@angular/forms';

import { HeroesComponent } from './heroes.component';

describe('HeroesComponent', () => {
  let component: HeroesComponent;
  let fixture: ComponentFixture<HeroesComponent>;
  let compiled: any;

  beforeEach(async(() => {
    TestBed.configureTestingModule({
      imports: [ FormsModule ],
      declarations: [ HeroesComponent ]
    })
    .compileComponents();
  }));

  beforeEach(() => {
    fixture = TestBed.createComponent(HeroesComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
    compiled = fixture.debugElement.nativeElement;
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });

  it(`should have a hero`, () => {
    expect(component.hero).toBeDefined();
  });

  it('should have title', () => {
-     expect(compiled.querySelector('h2').textContent).toContain('WINDSTORM Details');
+    const myHero = fixture.debugElement.queryAll(By.css('h2'));
    expect(myHero[1].nativeElement.textContent).toContain('WINDSTORM Details');
  });

  it('should have id', () => {
    const myHero = fixture.debugElement.queryAll(By.css('div'));
    expect(myHero[0].nativeElement.textContent).toEqual('id: 1');
  });
});

describe('HeroesComponent: input', () => {
  let component: HeroesComponent;
  let fixture: ComponentFixture<HeroesComponent>;
  let compiled: any;

  beforeEach(async(() => {
    TestBed.configureTestingModule({
      imports: [ FormsModule ],
      declarations: [ HeroesComponent ]
    })
      .compileComponents();
  }));

  beforeEach(() => {
    fixture = TestBed.createComponent(HeroesComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
    compiled = fixture.debugElement.nativeElement;
  });

  it(`should have editable hero name`, () => {
    const inputBox = fixture.debugElement.query(By.css('input')).nativeElement;
    inputBox.value = 'Dr. Nice';
    inputBox.dispatchEvent(new Event('input'));

    expect(inputBox.value).toBe('Dr. Nice');
    fixture.detectChanges();

    // two way binding
-    expect(compiled.querySelector('h2').textContent)
-      .toEqual((component.hero.name).toUpperCase() + ' Details');
-    const myHero = fixture.debugElement.queryAll(By.css('h2'));
+    const myHero = fixture.debugElement.queryAll(By.css('h2'));
+    expect(myHero[1].nativeElement.textContent)
+      .toEqual((component.hero.name).toUpperCase() + ' Details');
+  });
});
```

:negative_squared_cross_mark: unit test: 8 specs, 0 failures

:negative_squared_cross_mark: e2e test: Executed 4 of 4 specs (2 FAILED)

### :dog: e2e test: heroes.po.ts
```diff
import { browser, by, element, ExpectedConditions as EC } from 'protractor';

export class AppHeroes {
  body = element(by.css('body'));
-  title = element(by.css('app-heroes > h2'));
+  title = element.all(by.css('app-heroes > h2'));
  id = element.all(by.css('app-heroes > div'));
  name = element(by.css('input'));

  navigateTo() {
    browser.get(browser.baseUrl);
    return browser.wait(EC.presenceOf(this.body), 5000) as Promise< void>;
  }

  getTitle() {
-    return this.title.getText() as Promise<any>;
+    return this.title.get(1).getText() as Promise<any>;
  }

  getId() {
    return this.id.get(0).getText() as Promise<any>;
  }

  setName(name) {
    this.name.clear();
    return this.name.sendKeys(name) as Promise<any>;
  }
}
```

:negative_squared_cross_mark: unit test: 8 specs, 0 failures

:negative_squared_cross_mark: e2e test: Executed 4 of 4 specs SUCCESS

Now let us add additional tests for the newly introduced hero-list. 
